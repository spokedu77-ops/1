# Flow 배경(팬오라마) 권장사항

Flow 테마의 핵심은 **배경 교체**입니다. 카메라 주변 구면(Sphere)에 텍스처를 씌워 우주/실내 등 원하는 분위기를 넣을 수 있습니다. 저화질이면 깨져 보이고, 고화질이면 일부 기기에서 무거울 수 있어 아래를 권장합니다.

---

## 1. 권장 해상도

- **기본 권장: 2048×1024 (2K 가로)**  
  - 구면에 펼쳤을 때 대부분 기기에서 깨짐 없이 보이고, 메모리·디코딩 부담이 적습니다.
- **2:1 비율**을 권장합니다 (가로가 세로의 2배). Flow 엔진이 구면을 사용하므로 360° 파노라마에 맞춰 가로가 넓은 비율이 자연스럽습니다.
- **4K(4096×2048)**는 고사양 기기·PC 전용으로 두고, 설정에서 “고품질 배경” 옵션으로 선택하게 두는 방식을 추천합니다. 기본은 2K로 두면 저사양·모바일에서도 안정적입니다.

---

## 2. 포맷·용량

- **WebP** 또는 **JPEG** 사용을 권장합니다.
- 용량은 2K 기준 **500KB ~ 2MB** 전후로 두면 로딩과 품질 균형이 좋습니다. 4K는 1~4MB 수준으로 두어도 됩니다.
- 투명도가 필요 없으면 WebP/JPEG로 저장해 PNG보다 용량을 줄이는 것이 좋습니다.

---

## 3. 기기별 대응 전략

- **저화질이 깨지는 이유**: 구면에 텍스처를 펼치면 픽셀 밀도가 낮아져 블러/깨짐이 잘 보입니다. 해상도를 일정 수준 이상으로 올려야 합니다.
- **고화질이 모든 기기에서 안 될 수 있는 이유**: 대용량 이미지 디코딩·VRAM 사용으로 저사양·저메모리 기기에서 프레임 드랍 또는 로드 실패가 날 수 있습니다.
- **권장**:  
  - **기본 업로드**: 2048×1024 (2K) 전후, WebP/JPEG.  
  - **선택 사항**: Asset Hub 또는 Flow 설정에서 “배경 품질: 보통 / 높음”을 두고, “높음”일 때만 4K 경로를 쓰거나 리사이즈된 2K를 쓰도록 구현.

---

## 4. 구현 참고 (현재 코드)

- 배경 이미지는 [FlowEngine.ts](app/flow-phase/engine/FlowEngine.ts) `createSpaceBackground()`에서 `panoStoragePath`로 로드됩니다.
- THREE.TextureLoader로 한 번에 로드하므로, **저장소에 올릴 때부터 2K로 리사이즈해 두거나**, 업로드 시 2K/4K 중 선택해 저장하는 정책을 두면 됩니다.
- 필요 시 TextureLoader 전에 이미지 크기 제한(리사이즈된 URL 또는 품질별 경로)을 두어 저사양 기기에서는 2K만 로드하도록 할 수 있습니다.

---

## 요약

| 항목 | 권장 |
|------|------|
| 해상도 | **2048×1024 (2K)** 기본, 4K는 선택 옵션 |
| 비율 | **2:1** (가로:세로) |
| 포맷 | **WebP** 또는 **JPEG** |
| 용량 | 2K 기준 **500KB~2MB** 전후 |
| 기기 대응 | 기본 2K로 통일 시 대부분 기기에서 안정; 고사양 전용 4K는 별도 옵션으로 |

이렇게 하면 Flow 테마의 핵심인 배경 교체를, 다양한 기기에서 깨짐·렉 없이 사용할 수 있습니다.
