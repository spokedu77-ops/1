---
name: ""
overview: ""
todos: []
isProject: false
---

# 연간 커리큘럼 주차·탭 리팩토링 (수정본)

## 반영 사항 요약

- **주차**: 월 내 일자 고정(1~7=1주차)이 아니라 **캘린더 기준**으로 해당 월의 N주차 계산.
- **초기 1단 탭**: **개인 수업 커리큘럼**이 기본 선택(줄넘기 등 개인 탭이 먼저 보이도록).
- **종목 탭 배치**: 상단 줄넘기/자전거/인라인/배드민턴, 하단 축구/농구/배구/야구. 초기 선택 종목은 **줄넘기**.
- **선생님**: Admin과 **동일 UI**로 보여주되 **조회만 가능**(view 권한). 수정/삭제/등록 등 모든 쓰기 권한은 Admin만.
- **월 제한**: **센터 수업 커리큘럼**은 해당 월만 선택 가능(나머지 월 lock). **개인 수업 커리큘럼**은 월/주차 **제한 없음**(전체 선택 가능).

---

## 1. 주차 계산: 캘린더 기준

- **한국 기준 주 시작**: 일요일 (일요일~토요일이 한 주).
- **의도**: 1~7일이 1주차 고정이 아니라, 달력상 “그 주가 해당 월의 몇 주차인지”로 계산.
- **방법**: 해당 월 1일을 기준으로, “그 주의 일요일(한국 기준 주 시작 = 일요일)”을 주 시작으로 두고, 오늘 날짜가 그 달의 몇 번째 주에 속하는지 계산.
  - 예: 한국 기준 일요일 시작이 일반적이면, 월 1일이 포함된 주가 1주차. 그 다음 주가 2주차, …
  - 구현 예: `firstDay = new Date(year, monthIndex, 1)`, `startOfWeek` = 그 주의 일요일(한국 기준 주 시작 = 일요일), `today`와의 차이로 “몇 주째인지” 계산 → 1~~5 중 하나로 클램프(커리큘럼은 1~~4 또는 1~5 중 정책에 맞게).
- **유틸**: `getCurrentWeekOfMonth(): number` (1~~4 또는 1~~5)를 새로 두고, [app/lib/admin/scheduler/getCurrentWeekKey.ts](app/lib/admin/scheduler/getCurrentWeekKey.ts)에 추가하거나 `app/lib/curriculum/weekUtils.ts` 등에 구현. Admin/Teacher 모두 이 함수로 초기 `selectedWeek` 설정.

---

## 2. 탭 구조 (수정)

### 2.1 1단 탭

- **순서**: [ 개인 수업 커리큘럼 | 센터 수업 커리큘럼 ]
- **초기 선택**: **개인 수업 커리큘럼** (페이지 로드 시 `mainTab = 'personal'`).

### 2.2 2단 종목 탭 (개인 수업 선택 시만)

- **초기 선택**: **줄넘기**.
- **배치**:
  - **상단 한 줄**: 줄넘기, 자전거, 인라인, 배드민턴 (4개).
  - **하단 한 줄**: 축구, 농구, 배구, 야구 (4개).
- **상수 예** (순서 유지):
  - 1행: `['줄넘기', '자전거', '인라인', '배드민턴']`
  - 2행: `['축구', '농구', '배구', '야구']`

### 2.3 월/주차 제한

- **센터 수업 커리큘럼**: 현재 월만 선택 가능, 나머지 월은 **lock**(기존 Teacher 동작 유지). Admin도 동일 정책 적용할지, 아니면 Admin만 전체 월 선택 가능할지는 요구에 따라 결정. (현재 문의 기준으로는 “해당 월만 보일 수 있게 나머지 lock”이므로 **둘 다 해당 월만**으로 이해.)
- **개인 수업 커리큘럼**: 월/주차 **제한 없음** — 1~~12월, 1~~4주차 모두 선택 가능.

---

## 3. 권한

- **Teacher**: 연간 커리큘럼 페이지 **조회만**(view). 센터/개인 모두 읽기 전용. 수정·삭제·등록 버튼 없음.
- **Admin**: 연간 커리큘럼 페이지 **전체 권한**(조회·등록·수정·삭제). 센터 수업 커리큘럼 CRUD, 개인 수업 커리큘럼도 (추후 데이터 연동 시) CRUD.

---

## 4. UI 배치 (최종)

```
[ 헤더: 연간 커리큘럼 (관리자 / Teacher) ]

[ 개인 수업 커리큘럼 ] [ 센터 수업 커리큘럼 ]   ← 1단, 초기: 개인 수업

--- 개인 수업 선택 시 (초기 화면) ---
[ 줄넘기 | 자전거 | 인라인 | 배드민턴 ]   ← 2단 상단
[ 축구 | 농구 | 배구 | 야구 ]             ← 2단 하단
월/주차: 제한 없음 (1~12월, 1~4주차 선택 가능)
[ 선택된 종목 + 월/주차 영역 ]

--- 센터 수업 선택 시 ---
[ 1월 2월 ... 12월 ]  ← 현재 월만 선택 가능, 나머지 lock
[ 1주차 2주차 3주차 4주차 ]  ← 초기값: 캘린더 기준 해당 주차
[ 커리큘럼 카드 그리드 ]
```

---

## 5. 구현 체크리스트

- **캘린더 기준 주차** 유틸 `getCurrentWeekOfMonth()` 구현 (해당 월 1일·주 시작일 기준 N주차).
- Admin/Teacher **초기 주차**를 위 유틸로 설정 (센터 수업 탭 시).
- **1단 탭**: 개인 수업 / 센터 수업, **초기 선택 = 개인 수업**.
- **2단 종목 탭**: 상단 줄넘기/자전거/인라인/배드민턴, 하단 축구/농구/배구/야구, **초기 선택 = 줄넘기**.
- **센터 수업**: 해당 월만 선택 가능(나머지 월 lock). Admin/Teacher 동일.
- **개인 수업**: 월·주차 제한 없음 (전체 선택 가능).
- **Teacher**: Admin과 동일 UI, 조회 전용(버튼/액션은 view만).
- **Admin**: 전체 권한 유지.

이 순서로 적용하면 요청하신 대로 캘린더 주차, 초기 줄넘기·종목 배치, 선생님 view/관리자 권한, 센터 월 lock/개인 제한 없음이 반영됩니다.